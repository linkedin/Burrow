version: '1'
service:
  name: burrow
  owner: di
  image_name: service/burrow
  level: office hours
  containers:
    web:
      resources:
        requests:
          memory: 256Mi
          cpu: 1500m
        limits:
          memory: 256Mi
          cpu: 1500m
      dockerfile: Dockerfile
      needs:
        - kafka
      secret_files:
        burrow: /etc/burrow/
      ports:
      - name: http
        container: 8000
      livenessProbe:
        httpGet:
          path: burrow/admin
          port: 8000
        periodSeconds: 60
        initialDelaySeconds: 60
        successThreshold: 1
        failureThreshold: 3
        timeoutSeconds: 15
      annotations:
        ad.datadoghq.com/web.check_names: ["burrow"]
        ad.datadoghq.com/web.init_configs: [{}]
        ad.datadoghq.com/web.instances: [{"burrow_uri": "http://%%host%%:8000", "clusters": ["kafka1"]}]
